parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"nKA9":[function(require,module,exports) {
"use strict";var e=n(require("./math.rs"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t();if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var a,c,l,d,u,s,E,p=e;console.log("beep: ",p.add(1,2));var h="TriangleStripDrawMode",w="drawMode: ",f=document.createElement("button");f.style.fontFamily="monospace",f.style.fontSize="2em",f.style.backgroundColor="#2EAFAC",f.style.border="1px solid black",f.style.position="absolute",f.style.top=0,f.style.right=0,f.style.zIndex=1,f.innerText="".concat(w).concat(h),f.onclick=function(e){h="TriangleStripDrawMode"==h?"TrianglesDrawMode":"TriangleStripDrawMode",f.innerText="".concat(w).concat(h)};var y={drawSpheres:!1},v=new dat.GUI,m=Object.keys(y);for(var T in m)v.add(y,m[T]);var g={x:0,y:0};function R(e,t){return Math.random()*(t-e)+e}var H=[],b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new THREE.Vector3(0,0,0);o(this,e),this.vx=5e-5*R(-1,1),this.vy=5e-5*R(-2,2),this.alpha=255;var n=new THREE.BoxGeometry(1,1,1),r=new THREE.MeshBasicMaterial({color:3059628,transparent:!0}),i=new THREE.Mesh(n,r);i.scale.multiplyScalar(.005),i.position.add(t.clone()),this.cube=i,s.add(i)}return i(e,[{key:"finished",value:function(){return this.alpha<0}},{key:"update",value:function(){}}]),e}();function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new THREE.Vector3(0,0,0);if(q){var t=new b(e);H.push(t)}for(var n=H.length-1;n>=0;n--)H[n].update(),H[n].finished()&&(s.remove(H[n]),console.log("removed??",H.length,s.children.length),H.splice(n,1))}var x,M=.001,S=2,A=2,z=.1,P=.05,O=.00125,j=.1,B=1.25,C=.5,k=.5,D=.5,W=.95,L=.5,U=.005,F=15,q=!1,G=[],Q=[],I=0,_=[],X=[],Y=new THREE.RawShaderMaterial({vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById("fragmentShader").textContent,side:THREE.DoubleSide,transparent:!0});function J(){(E=new THREE.WebGLRenderer({alpha:!0})).setPixelRatio(window.devicePixelRatio),E.setSize(window.innerWidth,window.innerHeight),E.autoClear=!1,d=E.domElement,document.body.appendChild(d),s=new THREE.Scene,l=new THREE.ARView(a,E),u=new THREE.ARPerspectiveCamera(a,60,window.innerWidth/window.innerHeight,.01,100),c=new THREE.VRControls(u),window.addEventListener("resize",Te,!1),E.domElement.addEventListener("touchstart",function(e){q=!0}),E.domElement.addEventListener("touchend",function(e){q=!1,G.length=0,I+=1}),E.domElement.addEventListener("touchmove",function(e){g={x:e.changedTouches[0].pageX/document.body.clientWidth,y:e.changedTouches[0].pageY/document.body.clientHeight},document.querySelector("#info").innerHTML="".concat(g.x," \n ").concat(g.y)});var e=new THREE.PointLight(16711680,1,100);e.position.set(0,0,0),s.add(e),me()}THREE.ARUtils.getARDisplay().then(function(e){e?(a=e,J()):THREE.ARUtils.displayUnsupportedMessage()});var K=function(){var e=new THREE.Vector3(0,0,-1).multiplyScalar(z),t=new THREE.Vector3,n=new THREE.Vector3;new THREE.Vector3;return function(o){o.copy(u.position),t.copy(e),t.applyQuaternion(u.quaternion),o.add(t);var r=new THREE.Vector3(1,0).multiplyScalar(g.x);new THREE.Vector3(0,1,0).multiplyScalar(g.y);n.copy(r),n.applyQuaternion(u.quaternion)}}(),N=O,Z=new THREE.Vector3,$=new THREE.Vector3,ee=new THREE.Quaternion,te=new THREE.Quaternion,ne=new THREE.Vector3(0,0,1),oe=new THREE.Vector3(0,0,1),re=new THREE.Vector3,ie=new THREE.Vector3,ae=new THREE.Vector3,ce=[];function le(){return{position:new THREE.Vector3(Z.x,Z.y,Z.z),normal:new THREE.Vector3(ne.x,ne.y,ne.z),velocity:new THREE.Vector3(re.x,re.y,re.z),width:N}}var de=.0025;function ue(e){var t=new THREE.OctahedronGeometry(2,1),n=new THREE.MeshToonMaterial({wireframe:y.isWireframe}),o=new THREE.Mesh(t,n);o.position.set(e.position.x,e.position.y,e.position.z);var r=le(),i=1;return y.applyVelocityMult&&(i=100*r.velocity.manhattanLength()),o.scale.set(de*i,de*i,de*i),o}function se(){for(var e=0;e<_.length;++e)_[e]}function Ee(){if(y.drawSpheres){var e=ue(le());_.push(e),s.add(e)}if(!(G.length<S)){var t=G[G.length-2],n=G[G.length-1];t.position.distanceTo(n.position)<M?G.pop():(Q[I]&&s.remove(Q[I]),Q[I]=he(G),s.add(Q[I]))}}function pe(){if(X.push(le()),!(X.length<A)){x&&(X.shift(),s.remove(x));var e=X[X.length-2],t=X[X.length-1];e.position.distanceTo(t.position)<M||(x=he(X),s.add(x))}}function he(e){for(var t,n=new Float32Array(2*e.length*3),o=new Float32Array(2*e.length*3),r=new Float32Array(2*e.length*2),i=new Float32Array(2*e.length*3),a=new THREE.Vector3,c=new THREE.Vector3,l=new THREE.Vector3,d=!1,u=0;u<e.length;u++){var s=e[u];if(a.crossVectors(s.normal,s.velocity),a.normalize(),a.multiplyScalar(s.width),t)t.dot(s.velocity)<0&&(d=!d);else t=new THREE.Vector3;t.copy(s.velocity),d?(c.addVectors(s.position,a),l.subVectors(s.position,a)):(c.subVectors(s.position,a),l.addVectors(s.position,a));var E=2*u*3;n[E]=c.x,n[E+1]=c.y,n[E+2]=c.z,n[E+3]=l.x,n[E+4]=l.y,n[E+5]=l.z,o[E=2*u*3]=s.normal.x,o[E+1]=s.normal.y,o[E+2]=s.normal.z,o[E+3]=s.normal.x,o[E+4]=s.normal.y,o[E+5]=s.normal.z,i[E=2*u*3]=s.velocity.x,i[E+1]=s.velocity.y,i[E+2]=s.velocity.z,i[E+3]=s.velocity.x,i[E+4]=s.velocity.y,i[E+5]=s.velocity.z,r[E=2*u*2]=u/(e.length-1),r[E+1]=0,r[E+2]=u/(e.length-1),r[E+3]=1}var p=new THREE.BufferGeometry;function w(){this.array=null}return p.addAttribute("position",new THREE.BufferAttribute(n,3).onUpload(w)),p.addAttribute("normal",new THREE.BufferAttribute(o,3).onUpload(w)),p.addAttribute("uv",new THREE.BufferAttribute(r,2).onUpload(w)),p.addAttribute("velocity",new THREE.BufferAttribute(i,3).onUpload(w)),p.computeBoundingSphere(),mesh=new THREE.Mesh(p,Y),mesh.drawMode=THREE[h],mesh}function we(){ce.push(ae.length());var e=ce.length;if(e>F){for(var t=0,n=0;n<e;n++)t+=ce[n];t>U*F?(ce.length=0,ye()):ce.shift()}}function fe(){q=!1,G.length=0,I=0;for(var e=Q.length,t=0;t<e;t++)s.remove(Q[t])}function ye(){q&&(q=!1,s.remove(Q[I]),G.length=0),I-=1,s.remove(Q[I])}function ve(){$.copy(Z),oe.copy(ne),te.copy(ee),ie.copy(re),K(Z),Z.lerpVectors($,Z,C),ee.slerp(u.quaternion,L),ne.set(0,0,1),ne.applyQuaternion(ee),ne.normalize(),ne.lerpVectors(oe,ne,W),re.subVectors(Z,$),re.lerpVectors(ie,re,k),ae.subVectors(re,ie),N=THREE.Math.lerp(N,re.length()*B,P),N=Math.min(Math.max(N,O),j)}function me(){E.clearColor(),l.render(),u.updateProjectionMatrix(),c.update(),ve(),V(le().position),we(),q&&Ee(),se(),E.clearDepth(),E.render(s,u),a.requestAnimationFrame(me)}function Te(){u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),E.setSize(window.innerWidth,window.innerHeight)}
},{"./math.rs":"z6L1"}],"FrRc":[function(require,module,exports) {
var t=null;function e(){return t||(t=n()),t}function n(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return r(t[0])}return"/"}function r(t){return(""+t).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)\/[^\/]+$/,"$1")+"/"}exports.getBundleURL=e,exports.getBaseURL=r;
},{}],"Cqla":[function(require,module,exports) {
var r=require("./bundle-url").getBundleURL;function e(r){Array.isArray(r)||(r=[r]);var e=r[r.length-1];try{return Promise.resolve(require(e))}catch(n){if("MODULE_NOT_FOUND"===n.code)return new s(function(n,i){t(r.slice(0,-1)).then(function(){return require(e)}).then(n,i)});throw n}}function t(r){return Promise.all(r.map(u))}var n={};function i(r,e){n[r]=e}module.exports=exports=e,exports.load=t,exports.register=i;var o={};function u(e){var t;if(Array.isArray(e)&&(t=e[1],e=e[0]),o[e])return o[e];var i=(e.substring(e.lastIndexOf(".")+1,e.length)||e).toLowerCase(),u=n[i];return u?o[e]=u(r()+e).then(function(r){return r&&module.bundle.register(t,r),r}).catch(function(r){throw delete o[e],r}):void 0}function s(r){this.executor=r,this.promise=null}s.prototype.then=function(r,e){return null===this.promise&&(this.promise=new Promise(this.executor)),this.promise.then(r,e)},s.prototype.catch=function(r){return null===this.promise&&(this.promise=new Promise(this.executor)),this.promise.catch(r)};
},{"./bundle-url":"FrRc"}],"Q7em":[function(require,module,exports) {
module.exports=function(t){return fetch(t).then(function(t){return WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(t):t.arrayBuffer().then(function(t){return WebAssembly.instantiate(t)})}).then(function(t){return t.instance.exports})};
},{}],0:[function(require,module,exports) {
var b=require("Cqla");b.register("wasm",require("Q7em"));b.load([["math.08aa8710.wasm","z6L1"]]).then(function(){require("nKA9");});
},{}]},{},[0], null)
//# sourceMappingURL=/brush.36ff6c36.js.map