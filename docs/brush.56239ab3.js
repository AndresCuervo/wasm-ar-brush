parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"nKA9":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}var o,r,i,a,l,c,d;console.log("beep: ",wasm.add(1,2));var s="TriangleStripDrawMode",u="drawMode: ",E=document.createElement("button");E.style.fontFamily="monospace",E.style.fontSize="2em",E.style.backgroundColor="#2EAFAC",E.style.border="1px solid black",E.style.position="absolute",E.style.top=0,E.style.right=0,E.style.zIndex=1,E.innerText="".concat(u).concat(s),E.onclick=function(e){s="TriangleStripDrawMode"==s?"TrianglesDrawMode":"TriangleStripDrawMode",E.innerText="".concat(u).concat(s)};var h={drawSpheres:!1},p=new dat.GUI,w=Object.keys(h);for(var y in w)p.add(h,w[y]);var f={x:0,y:0};function v(e,t){return Math.random()*(t-e)+e}var m=[],T=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new THREE.Vector3(0,0,0);e(this,t),this.vx=5e-5*v(-1,1),this.vy=5e-5*v(-2,2),this.alpha=255;var o=new THREE.BoxGeometry(1,1,1),r=new THREE.MeshBasicMaterial({color:3059628,transparent:!0}),i=new THREE.Mesh(o,r);i.scale.multiplyScalar(.005),i.position.add(n.clone()),this.cube=i,c.add(i)}return n(t,[{key:"finished",value:function(){return this.alpha<0}},{key:"update",value:function(){}}]),t}();function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new THREE.Vector3(0,0,0);if(P){var t=new T(e);m.push(t)}for(var n=m.length-1;n>=0;n--)m[n].update(),m[n].finished()&&(c.remove(m[n]),console.log("removed??",m.length,c.children.length),m.splice(n,1))}var g,H=.001,V=2,b=2,x=.1,M=.05,S=.00125,A=.1,z=1.25,B=.5,C=.5,L=.5,U=.95,k=.5,D=.005,F=15,P=!1,W=[],q=[],G=0,Q=[],j=[],I=new THREE.RawShaderMaterial({vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById("fragmentShader").textContent,side:THREE.DoubleSide,transparent:!0});function O(){(d=new THREE.WebGLRenderer({alpha:!0})).setPixelRatio(window.devicePixelRatio),d.setSize(window.innerWidth,window.innerHeight),d.autoClear=!1,a=d.domElement,document.body.appendChild(a),c=new THREE.Scene,i=new THREE.ARView(o,d),l=new THREE.ARPerspectiveCamera(o,60,window.innerWidth/window.innerHeight,.01,100),r=new THREE.VRControls(l),window.addEventListener("resize",ye,!1),d.domElement.addEventListener("touchstart",function(e){P=!0}),d.domElement.addEventListener("touchend",function(e){P=!1,W.length=0,G+=1}),d.domElement.addEventListener("touchmove",function(e){f={x:e.changedTouches[0].pageX/document.body.clientWidth,y:e.changedTouches[0].pageY/document.body.clientHeight},document.querySelector("#info").innerHTML="".concat(f.x," \n ").concat(f.y)});var e=new THREE.PointLight(16711680,1,100);e.position.set(0,0,0),c.add(e),we()}THREE.ARUtils.getARDisplay().then(function(e){e?(o=e,O()):THREE.ARUtils.displayUnsupportedMessage()});var X=function(){var e=new THREE.Vector3(0,0,-1).multiplyScalar(x),t=new THREE.Vector3,n=new THREE.Vector3;new THREE.Vector3;return function(o){o.copy(l.position),t.copy(e),t.applyQuaternion(l.quaternion),o.add(t);var r=new THREE.Vector3(1,0).multiplyScalar(f.x);new THREE.Vector3(0,1,0).multiplyScalar(f.y);n.copy(r),n.applyQuaternion(l.quaternion)}}(),Y=S,J=new THREE.Vector3,K=new THREE.Vector3,N=new THREE.Quaternion,Z=new THREE.Quaternion,$=new THREE.Vector3(0,0,1),_=new THREE.Vector3(0,0,1),ee=new THREE.Vector3,te=new THREE.Vector3,ne=new THREE.Vector3,oe=[];function re(){return{position:new THREE.Vector3(J.x,J.y,J.z),normal:new THREE.Vector3($.x,$.y,$.z),velocity:new THREE.Vector3(ee.x,ee.y,ee.z),width:Y}}var ie=.0025;function ae(e){var t=new THREE.OctahedronGeometry(2,1),n=new THREE.MeshToonMaterial({wireframe:h.isWireframe}),o=new THREE.Mesh(t,n);o.position.set(e.position.x,e.position.y,e.position.z);var r=re(),i=1;return h.applyVelocityMult&&(i=100*r.velocity.manhattanLength()),o.scale.set(ie*i,ie*i,ie*i),o}function le(){for(var e=0;e<Q.length;++e)Q[e]}function ce(){if(h.drawSpheres){var e=ae(re());Q.push(e),c.add(e)}if(!(W.length<V)){var t=W[W.length-2],n=W[W.length-1];t.position.distanceTo(n.position)<H?W.pop():(q[G]&&c.remove(q[G]),q[G]=se(W),c.add(q[G]))}}function de(){if(j.push(re()),!(j.length<b)){g&&(j.shift(),c.remove(g));var e=j[j.length-2],t=j[j.length-1];e.position.distanceTo(t.position)<H||(g=se(j),c.add(g))}}function se(e){for(var t,n=new Float32Array(2*e.length*3),o=new Float32Array(2*e.length*3),r=new Float32Array(2*e.length*2),i=new Float32Array(2*e.length*3),a=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,d=!1,u=0;u<e.length;u++){var E=e[u];if(a.crossVectors(E.normal,E.velocity),a.normalize(),a.multiplyScalar(E.width),t)t.dot(E.velocity)<0&&(d=!d);else t=new THREE.Vector3;t.copy(E.velocity),d?(l.addVectors(E.position,a),c.subVectors(E.position,a)):(l.subVectors(E.position,a),c.addVectors(E.position,a));var h=2*u*3;n[h]=l.x,n[h+1]=l.y,n[h+2]=l.z,n[h+3]=c.x,n[h+4]=c.y,n[h+5]=c.z,o[h=2*u*3]=E.normal.x,o[h+1]=E.normal.y,o[h+2]=E.normal.z,o[h+3]=E.normal.x,o[h+4]=E.normal.y,o[h+5]=E.normal.z,i[h=2*u*3]=E.velocity.x,i[h+1]=E.velocity.y,i[h+2]=E.velocity.z,i[h+3]=E.velocity.x,i[h+4]=E.velocity.y,i[h+5]=E.velocity.z,r[h=2*u*2]=u/(e.length-1),r[h+1]=0,r[h+2]=u/(e.length-1),r[h+3]=1}var p=new THREE.BufferGeometry;function w(){this.array=null}return p.addAttribute("position",new THREE.BufferAttribute(n,3).onUpload(w)),p.addAttribute("normal",new THREE.BufferAttribute(o,3).onUpload(w)),p.addAttribute("uv",new THREE.BufferAttribute(r,2).onUpload(w)),p.addAttribute("velocity",new THREE.BufferAttribute(i,3).onUpload(w)),p.computeBoundingSphere(),mesh=new THREE.Mesh(p,I),mesh.drawMode=THREE[s],mesh}function ue(){oe.push(ne.length());var e=oe.length;if(e>F){for(var t=0,n=0;n<e;n++)t+=oe[n];t>D*F?(oe.length=0,he()):oe.shift()}}function Ee(){P=!1,W.length=0,G=0;for(var e=q.length,t=0;t<e;t++)c.remove(q[t])}function he(){P&&(P=!1,c.remove(q[G]),W.length=0),G-=1,c.remove(q[G])}function pe(){K.copy(J),_.copy($),Z.copy(N),te.copy(ee),X(J),J.lerpVectors(K,J,B),N.slerp(l.quaternion,k),$.set(0,0,1),$.applyQuaternion(N),$.normalize(),$.lerpVectors(_,$,U),ee.subVectors(J,K),ee.lerpVectors(te,ee,C),ne.subVectors(ee,te),Y=THREE.Math.lerp(Y,ee.length()*z,M),Y=Math.min(Math.max(Y,S),A)}function we(){d.clearColor(),i.render(),l.updateProjectionMatrix(),r.update(),pe(),R(re().position),ue(),P&&ce(),le(),d.clearDepth(),d.render(c,l),o.requestAnimationFrame(we)}function ye(){l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),d.setSize(window.innerWidth,window.innerHeight)}
},{}]},{},["nKA9"], null)
//# sourceMappingURL=/brush.56239ab3.js.map